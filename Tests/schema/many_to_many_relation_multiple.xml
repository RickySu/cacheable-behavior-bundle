<?xml version="1.0" encoding="UTF-8"?>
<database name="cacheable_behavior_database" defaultIdMethod="native">
    <table name="#Namespace#_manytomany1">
        <column name="id" required="true" primaryKey="true" type="INTEGER" />
        <column name="table1key1" required="true" type="INTEGER" /> 
        <column name="table1key2" required="true" type="INTEGER" /> 
        <column name="value" type="INTEGER" /> 
        <unique>
            <unique-column name="table1key1" />
            <unique-column name="table1key2" />
        </unique>                
        <behavior name="cacheable"/>
    </table>
    <table name="#Namespace#_manytomany2">
        <column name="id" required="true" primaryKey="true" type="INTEGER" />
        <column name="table2key1" required="true" type="INTEGER" /> 
        <column name="table2key2" required="true" type="INTEGER" /> 
        <column name="value" type="INTEGER" /> 
        <unique>
            <unique-column name="table2key1" />
            <unique-column name="table2key2" />
        </unique>
        <behavior name="cacheable"/>
    </table>
    <table name="#Namespace#_manytomany1_#Namespace#_manytomany2" isCrossRef="true">
        <behavior name="cacheable"/>
        <column name="t1key1" type="bigint" primaryKey="true" />
        <column name="t1key2" type="bigint" primaryKey="true" />
        <column name="t2key1" type="bigint" primaryKey="true" />
        <column name="t2key2" type="bigint" primaryKey="true" />        
        <foreign-key foreignTable="#Namespace#_manytomany1" onDelete="cascade" onUpdate="cascade">
            <reference local="t1key1" foreign="table1key1" />
            <reference local="t1key2" foreign="table1key2" />
        </foreign-key>
        <foreign-key foreignTable="#Namespace#_manytomany2" onDelete="cascade" onUpdate="cascade">
            <reference local="t2key1" foreign="table2key1" />
            <reference local="t2key2" foreign="table2key2" />
        </foreign-key>        
    </table>
</database>
